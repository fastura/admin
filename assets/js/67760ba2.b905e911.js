"use strict";(self.webpackChunkfastura=self.webpackChunkfastura||[]).push([[300],{4137:(e,a,r)=>{r.d(a,{Zo:()=>c,kt:()=>g});var t=r(7294);function n(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function o(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?o(Object(r),!0).forEach((function(a){n(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function l(e,a){if(null==e)return{};var r,t,n=function(e,a){if(null==e)return{};var r,t,n={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||(n[r]=e[r]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=t.createContext({}),s=function(e){var a=t.useContext(p),r=a;return e&&(r="function"==typeof e?e(a):i(i({},a),e)),r},c=function(e){var a=s(e.components);return t.createElement(p.Provider,{value:a},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},d=t.forwardRef((function(e,a){var r=e.components,n=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(r),d=n,g=m["".concat(p,".").concat(d)]||m[d]||u[d]||o;return r?t.createElement(g,i(i({ref:a},c),{},{components:r})):t.createElement(g,i({ref:a},c))}));function g(e,a){var r=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=d;var l={};for(var p in a)hasOwnProperty.call(a,p)&&(l[p]=a[p]);l.originalType=e,l[m]="string"==typeof e?e:n,i[1]=l;for(var s=2;s<o;s++)i[s]=r[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}d.displayName="MDXCreateElement"},1189:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var t=r(7462),n=(r(7294),r(4137));const o={},i="Migracion del Pro5 a Pro6",l={unversionedId:"guias-adicionales/migracion-pro5-pro6",id:"guias-adicionales/migracion-pro5-pro6",title:"Migracion del Pro5 a Pro6",description:"Se presentar\xe1 los pasos para poder migrar su sistema del Pro5 a la nueva versi\xf3n de Pro6.",source:"@site/docs/guias-adicionales/04-migracion-pro5-pro6.md",sourceDirName:"guias-adicionales",slug:"/guias-adicionales/migracion-pro5-pro6",permalink:"/admin/guias-adicionales/migracion-pro5-pro6",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"defaultSidebar",previous:{title:"\xbfQu\xe9 es el PSE y OSE?",permalink:"/admin/guias-adicionales/PSE-OSE"},next:{title:"Migraci\xf3n de su proyecto entre servidores",permalink:"/admin/guias-adicionales/migracion-entre-servidores"}},p={},s=[{value:"Pasos",id:"pasos",level:2},{value:"Posibles errores",id:"posibles-errores",level:2},{value:"Error al ejecutar el composer install",id:"error-al-ejecutar-el-composer-install",level:3},{value:"Error &quot;<strong>Server certificate verification failed</strong>&quot;",id:"error-server-certificate-verification-failed",level:3}],c={toc:s},m="wrapper";function u(e){let{components:a,...r}=e;return(0,n.kt)(m,(0,t.Z)({},c,r,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"migracion-del-pro5-a-pro6"},"Migracion del Pro5 a Pro6"),(0,n.kt)("p",null,"Se presentar\xe1 los pasos para poder migrar su sistema del Pro5 a la nueva versi\xf3n de Pro6."),(0,n.kt)("h2",{id:"pasos"},"Pasos"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Detener el proxy"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker stop proxy_proxy_1\n")),(0,n.kt)("admonition",{parentName:"li",title:"\xbfPor qu\xe9?",type:"note"},(0,n.kt)("p",{parentName:"admonition"}," Este paso se hace principalmente para que ning\xfan cliente pueda acceder al sistema mientras se esta actualizando el sistema"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Dirigirse a su contenedor FPM "),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker exec -ti [contenedor_fpm] bash\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Coloque este comando para verificar donde esta apuntado el remoto"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git remote -v \n# origin https://gitlab.buho.la/buho/facturador/facturador5.git (fetch) \n# origin https://gitlab.buho.la/buho/facturador/facturador5.git (push) \n")),(0,n.kt)("admonition",{parentName:"li",title:"Tenga en cuenta",type:"note"},(0,n.kt)("p",{parentName:"admonition"}," Lo que se muestra arriba es un ejemplo de lo que se podr\xe1 ver dentro de su consola. "))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Ahora se tiene que establecer el nuevo remoto para que se actualice, coloque el siguiente"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git remote set-url origin https://gitlab.buho.la/pro6/pro6.git\n")),(0,n.kt)("p",{parentName:"li"},"Alguna veces podria presentar que el ",(0,n.kt)("strong",{parentName:"p"},"origin")," tenga otro nombre ya que es un alias, por ejemplo"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git remote -v \n# buho https://gitlab.buho.la/buho/facturador/facturador5.git (fetch) \n# buho https://gitlab.buho.la/buho/facturador/facturador5.git (push) \n")),(0,n.kt)("p",{parentName:"li"},"En estos casos solo tendr\xedas que hacer un cambio"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git remote set-url buho https://gitlab.buho.la/pro6/pro6.git\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Con todo ya hecho, bajamos los cambios del repositorio"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git pull origin master\n")),(0,n.kt)("p",{parentName:"li"},"Y s\xed se eligi\xf3 otro al\xedas entonces ser\xeda "),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git pull buho master\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Luego, tenemos que actualizar las dependencias, sigue los siguientes comandos"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"rm -r vendor; composer install\n")),(0,n.kt)("p",{parentName:"li"},"Posiblemente pueda suceder errores, en la secci\xf3n final se pondra las posibles soluciones que pueda occurir a la hora de hacer composer install."),(0,n.kt)("p",{parentName:"li"},"Despu\xe9s de eso, dar permisos con el siguiente comando ",(0,n.kt)("inlineCode",{parentName:"p"},"chmod -R 777 vendor/mpdf/mpdf"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Ejecutar migraciones"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan migrate; php artisan tenancy:migrate\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Limpiar cache"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan config:cache; php artisan cache clear\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Luego ingresar al archivo .env con el siguiente comando `",(0,n.kt)("inlineCode",{parentName:"p"},"nano .env")," y luego coloca al final del archvo lo siguiente:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-.env"},"MULTI_USER_ENABLED=true\nTENANT_SESSION_LIFETIME_ENABLED=true\nSESSION_LIFETIME=60\n")),(0,n.kt)("p",{parentName:"li"},"y luego colocar el siguiente comando ",(0,n.kt)("inlineCode",{parentName:"p"},"php artisan optimize:clear")),(0,n.kt)("p",{parentName:"li"},"Con esto, ya tendr\xe1s el sistema migrado al Pro6."))),(0,n.kt)("h2",{id:"posibles-errores"},"Posibles errores"),(0,n.kt)("h3",{id:"error-al-ejecutar-el-composer-install"},"Error al ejecutar el composer install"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Primera opci\xf3n es ejecutar el siguiente comando"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-php"},"composer self-update\n")),(0,n.kt)("p",{parentName:"li"},"Luego volver a ejecutar el comando ",(0,n.kt)("inlineCode",{parentName:"p"},"composer install"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Segunda opci\xf3n se debe borrar un archivo con el siguiente comando"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"rm composer.lock\n")),(0,n.kt)("p",{parentName:"li"},"Luego volver a ejecutar el comando ",(0,n.kt)("inlineCode",{parentName:"p"},"composer install")))),(0,n.kt)("h3",{id:"error-server-certificate-verification-failed"},'Error "',(0,n.kt)("strong",{parentName:"h3"},"Server certificate verification failed"),'"'),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Se debe ejecutar el siguiente comando"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git config --global http sslverify false\n")))))}u.isMDXComponent=!0}}]);